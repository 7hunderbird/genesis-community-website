---
# vim:ft=markdown:tw=76
title:  Genesis Kit Migration Processes
url:    /docs/migrations/index.html
format: markdown
--- |-
# Introduction

_Migration Processes_ are specific, technical notes, authored by the Genesis
Core Team and Genesis Kit Authors, to provide information on performing data
and configuration migrations from one version of a kit to another.

These processes are not easily automated, and are best served via
documentation.  In some cases, these processes are required to properly
migrate without data loss.  Sometimes they are merely advisory.

Each migration process is given a unique identification, indicating which
Genesis Kit it applies to.  Migration Process numbers will not be
intentionally reused.  Indeed, they are intended to be used in reference
documentation (like Github release notes).

# Genesis/All Kits

## GMP-GEN-0001 - Environment File `genesis` Block Required in v2.7.x

Though introduced in v2.6.x, the `genesis` block in the environment files is
now the primary source of all things not kit related, and will be required
in a future 2.7.x release.  For now, continued use of `params`-based values
that have been moved to the `genesis` block will ellicit a warning.

Note:  Not *ALL* values are being moved out of the `params` block, just
specific values.

Read the [full details in GMP-GEN-0001 - Environment File `genesis` Block Required](/docs/migrations/gmp-GEN-0001)

# BOSH

The following migration processes apply to the Genesis BOSH Kit, for
deploying a BOSH director.

## GMP-BOSH-0001 - BPM Release Collision

If the BOSH director deploying this BOSH already has bpm 0.12.3 on it, you
may run into a collision as this kit attempts to change it to a precompiled
release. In that case, the release needs to be manually uploaded.

Read the [full details of **GMP-BOSH-0001 - BPM Release Collision**](/docs/migrations/gmp-bosh-0001).

# Cloud Foundry

The following migration processes apply to the Genesis CF Kit, for deploying
Open Source Cloud Foundry instances.

## GMP-CF-0003 - TLS Certificate Refactor in v1.8.0

Cloud Foundry Genesis Kit v1.8.0 refactors the TLS certificates generated by
the kit that are used internally to closely approximate those used by
cf-deployment v12.5.0.  This remaps the CA signing certificate as well as
the CN and SANs used by the certificates. As such, the existing certificates
need to be rotated.

**NEW:** [Simplified process](/docs/migrations/gmp-cf-0003a) updated for Genesis v2.7.7+

Read the original [full details of **GMP-CF-0003 - TLS Certificate Refactor in v1.8.0**](/docs/migrations/gmp-cf-0003).

## GMP-CF-0002 - Optionally Removing Consul in 1.3

Operators who wish to remove Consul after updating to Genesis CF Kit v1.3 may
do so with this Genesis Migration Process. It is completely optional, and does
not alter future upgrade paths.

Read the [full details of **GMP-CF-0002 - Optionally Removing Consul in 
               1.3**](/docs/migrations/gmp-cf-0002).


## GMP-CF-0001 - Database Scheme Fix Migration

We recently discovered an issue affecting versions 1.1.0, 1.1.1 and 1.1.2 of
the Genesis CF Kit.   Locket and Diego were incorrectly configured to place
their tables in the `postgres` database, instead of their dedicated
`locketdb` and `diegodb` databases.

While this does not affect day-to-day normal operation of Cloud Foundry, we
still see this an issue that needs to be corrected as soon as possible.

<p style="color: red; font-weight: bold">This process must be completed in
order to update to version 1.2.0 or newer if your Cloud Foundry environments
were deployed with, or updated to the following versions:</p>

- [Genesis CF Kit v1.1.0](https://github.com/genesis-community/cf-genesis-kit/releases/tag/v1.1.0)
- [Genesis CF Kit v1.1.1](https://github.com/genesis-community/cf-genesis-kit/releases/tag/v1.1.1)
- [Genesis CF Kit v1.1.2](https://github.com/genesis-community/cf-genesis-kit/releases/tag/v1.1.2)

Read the [full details of **GMP-CF-0001 - Database Scheme Fix
               Migration**](/docs/migrations/gmp-cf-0001).

# Concourse

## GMP-CONCOURSE-0001 - Concourse 4 Upgrade

Concourse 4 makes some changes to the way auth works, and certain
configurations can cause your upgrade/migration to fail.

Read the [full details of **GMP-CONCOURSE-0001 - Concourse 4 Upgrade**](/docs/migrations/gmp-concourse-0001).
